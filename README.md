# 주제
요기요 리뷰 데이터를 활용한 리뷰 자동 생성기

## 배경 및 필요성
배경 
- 리뷰를 쓰지 않는 사용자들의 증가
![image](https://user-images.githubusercontent.com/72961952/203671799-ca03944b-f69a-4013-a198-263343b1ba48.png)
- 음식 주문 시 리뷰 이벤트에 참여하며 이벤트 음식을 받아가지만 정작 리뷰는 작성하지 않음.
- 가게의 이벤트 음식값이 만만치 않게 들어감에도 리뷰를 실제로 작성하는지 안하는지는 먼저 알 수 없음
- 또한 음식점들의 선호도에는 실제 고객들의 리뷰가 중요함.
- 리뷰를 작성하기 어려운 사용자를 위한 리뷰 생성기에 대한 필요성을 느끼는 이유가 됨.

## 관련 분석 사례
1) 딥러닝을 이용한 배달 음식점 리뷰 자동 생성, 김나경외 3, 2021.10
```
  - Keras기반 LSTM모델과 KOGPT-2 모델을 활용해 학습한 결과를 바탕으로 카테고리 별 키워드 기만의 배달 음식점 리뷰를 생성하는 방법을 제안함
  - 맛, 양, 배달, 가격으로 구성된 데이터를 카테고리 별로 구분
  - 새롭게 생성된 텍스트는 의미와 문맥을 판단해 리뷰 데이터와 비슷하게 구현
  - 모델의 성능평가는 정량적, 정성적 평가를 진행
  - Keras LSTM 모델
    - batch_size: 64, epoch:50
    - 훈련 정확도는 98.5241%
    - 검증 정확도는 평균 69.3663%
    - 특정 반복 이후부터는 과적합이 발생해 성능이 좋아지지 않았고, 조건을 다르게 한 실험결과도 비슷했음.
    - 데이터의 부족으로 데이터 패턴을 학습해 나타난 결과로 해석함
  - KoGPT-2 모델
    - 잘못 생성된 리뷰의 경우 전혀 다른 의미를 갖는 리뷰를 생성하진 않지만 어색한 문장으로 연결
    - 시험 정확도: 93.68% / 훈련 정확도는 90%를 넘지 못함
    - 학습데이터의 양을 증가 시킬 필요성을 느낌
  - Conclusion
    - 실험 결과 가장 적합한 모델은 'KoGPT-2'였음. 실험 모델들 모두 데이터가 충분치 않았기에, 추가적인 데이터 셋을 구축해 과적합 문제를 해결한다면 더 좋은 성능이 나올 것이라 예상
```

## 관련 기술 소개
  - 딥러닝
    - 머신 러닝의 한 방법으로, 학습 과정 동안 인공 신경망으로서 예시 데이터에서 얻은 일반적인 ㄱ규칙을 독립적으로 훈련(구축)함. 특히 머신 비전 분야에서 신경망을 일반적으로 데이터와 예제 데이터에 대한 사전 정의된 결과와 같은 지도 학습을 통해 학습됨.(출처: "https://www.baslerweb.com/ko/vision-campus/markets-and-applications/what-is-deep-learning/")
  - 자연어처리(NLP)
     - 머신러닝을 사용해 텍스트의 구조와 의미를 파악하는 것. 자연어 처리를 통해 조직에서 텍스트를 분석하고 사람, 장소, 사건에 대한 정보를 추출해 소셜 미디어 감정과 고객 대화를 더욱 정확하게 이해할 수 있음. (출처: "https://cloud.google.com/learn/what-is-natural-language-processing?hl=ko")
     - 인공지능의 한 분야로서 머신러닝을 사용해 텍스트와 데이터를 처리하고 해석함. 자연어 인식 및 자연어 생성이 그 유형 중 하나임.
  - KoGPT2 (한국어 GPT-2) Ver 2.0
    - 주어진 텍스트의 다음 단어를 잘 예측할 수 있도록 학습된 언어모델이며 문장 생성에 최적화 되어 있음. **KOGPT2**는 부족한 한국어 성능을 극복하기 위해 40GB 이상의 텍스트로 학습된 한국어 디코더(**decoder**) 언어모델임.
  
## 본 주제의 차별성
  - 고객이 주문한 메뉴를 입력하고 그에 맞는 카테고리를 설정할 수 있음.
  - 리뷰가 생성될 때, 사용자가 정한 **맛**, **양**, **배달**에 **좋음**, **보통**, **나쁨**과 같은 강도를 정해 리뷰가 생성되게 할 수 있음.
  - 사용자가 원하는 내용의 리뷰가 아닐 시 새로고침을 통해 다시 새로운 리뷰를 생성할 수 있음.

## 분석 시나리오 및 가설(데이터 설명)
  - 학습 데이터의 종류는 음식별 데이터 8개로 구성되어있으며 각 카테고리별로 데이터는 '리뷰' 데이터 1개의 열로만 구성되어있다. 평점이 '맛', '양', '배달' 이렇게 세분화되어있는만큼 초기 설계는 사용자가 평점종류 별로 점수를 선택하고, 선택한 값의 가중치에 따라 평점 종류별로 좋고 나쁨을 고려해서 리뷰를 만들어주는 모델로 설계 했으며 '맛평점', '양평점', '배달평점', '리뷰' 4개의 데이터 열을 `맛2 / 양1 / 배달1 / 배달 빠르고 치킨 맛있어요'와 같은 형태로 데이터를 1개의 열로 병합해서 학습시켰다.
  - 3개의 평점 종류별 평점 분포도 확인 결과 대략, 평점5는 전체의 95%, 평점3과 4는 3%, 평점 1과 2는 2%정도 분포했으며 각각 2, 1, 0으로 라벨링하여서 좋음/보통/나쁨을 나타내었다.
  - 직접 리뷰 확인결과 대체적으로 평점 5는 절대적으로 좋은 리뷰이었으며, 3과 4는 애매한 평가 혹은 장단점이 포함된 리뷰, 1과 2는 다시는 이용할것 같지 않은 리뷰였다. 위와 같은 평점 라벨링에 따라서, 리뷰의 좋고 나쁜 결과가 출력될것이라고 예상했다.
  - ![리뷰](https://user-images.githubusercontent.com/81501114/203679275-692c96d4-8a6e-4df4-bdd1-adb0da42dbf8.png)

## 설계
  - 프로젝트 설계 순서는 데이터 크롤링 -> 전처리 -> 모델링 -> UI구현 순서로 설계하였다. 
    - 크롤링 : `요기요` 웹사이트에서 '맛','양','배달' 평점과 '리뷰' 데이터를 크롤링한다.
    - 전처리 : Spark를 이용해서 중복 리뷰데이터, 불필요한 따옴표("), 같은 리뷰 내 줄바꿈(\n)을 제거하고 '맛평점','양평점','배달평점','리뷰'를 한개의 열로 묶어주었다.
    - 모델링 : 사용자가 설정한 리뷰 생성 옵션 값들을 string형태로 묶어서, 학습 시킨 데이터의 형태 `맛2 / 양1 / 배달1 / 배달 빠르고 맛있어요`에 맞춰주었다
    - 설계 : 사용자가 음식종류, 맛평점, 양평점, 배달평점을 선택할수 있으며, 별도로 키워드 입력도 가능하게 했으며, 리뷰 생성 결과가 설정값에 비교해서 마음에 들지 않을때, 잘못된 리뷰임을 알리는 버튼과 리뷰 복사버튼을 설계했다.
## 구현

## 결론(Insight)

## Reference
